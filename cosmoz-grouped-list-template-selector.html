<dom-module id="cosmoz-grouped-list-template-selector">
	<template>
		<style>
			:host {
				display: block;
			}
		</style>
		<content></content>
	</template>
</dom-module>

<script>
	/*global Polymer*/
	'use strict';
	Polymer({

		is: 'cosmoz-grouped-list-template-selector',

		properties: {
			item: {
				type: Object,
				observer: '_itemChanged'
			},

			selectorId: {
				type: Number,
			}
		},


		attached: function () {
			if (this.selectorId === undefined) {
				// Notifies parent cosmoz-grouped-list that a new template-selector
				// has been added so that it gets a selectorId
				this.fire('template-selector-attached', {
					selector: this
				});

				var item = this.parentElement;

				//this._slot = document.createElement('slot');
				//this._slot.setAttribute('name', 'slot' + this.selectorId);
				this._slot = document.createElement('content');
				this._slot.setAttribute('select', '#slot' + this.selectorId);
				Polymer.dom(item).appendChild(this._slot);

				this.id = 'slot' + this.selectorId;
				this.setAttribute('slot', this.id);
				item._selectorId = this.selectorId;
				Polymer.dom(this.domHost).appendChild(this);
				Polymer.dom.flush();

				this.fire('template-selector-item-changed', {
					selector: this,
					item: this.item,
				});
			}
		},

		_itemChanged: function (newItem, oldItem) {
			this.fire('template-selector-item-changed', {
				selector: this,
				item: newItem,
			});
		},
	});
</script>
